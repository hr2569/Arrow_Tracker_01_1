{"dependencies":[{"name":"@babel/runtime/helpers/asyncToGenerator","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"YisBBiy2Xm9DEVdFebZ2nbgAHBo=","exportNames":["*"],"imports":1}},{"name":"expo-file-system","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":47,"index":47}}],"key":"6GyvFG3BsQPSqqu9QRKJ8hfZxPw=","exportNames":["*"],"imports":1}},{"name":"expo-sharing","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":48},"end":{"line":2,"column":40,"index":88}}],"key":"SUh687CeWkW0B+T6RbmrU/yQMvg=","exportNames":["*"],"imports":1}},{"name":"expo-document-picker","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":89},"end":{"line":3,"column":55,"index":144}}],"key":"NWjULt4J8GGUdXN68lY2F08+J7M=","exportNames":["*"],"imports":1}},{"name":"./localStorage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":145},"end":{"line":4,"column":79,"index":224}}],"key":"0SgXd320WtDFl1YmvtLMkksOAwg=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  function _interopNamespace(e) {\n    if (e && e.__esModule) return e;\n    var n = {};\n    if (e) Object.keys(e).forEach(function (k) {\n      var d = Object.getOwnPropertyDescriptor(e, k);\n      Object.defineProperty(n, k, d.get ? d : {\n        enumerable: true,\n        get: function () {\n          return e[k];\n        }\n      });\n    });\n    n.default = e;\n    return n;\n  }\n  Object.defineProperty(exports, \"createBackup\", {\n    enumerable: true,\n    get: function () {\n      return createBackup;\n    }\n  });\n  Object.defineProperty(exports, \"restoreBackup\", {\n    enumerable: true,\n    get: function () {\n      return restoreBackup;\n    }\n  });\n  var _babelRuntimeHelpersAsyncToGenerator = require(_dependencyMap[0]);\n  var _asyncToGenerator = _interopDefault(_babelRuntimeHelpersAsyncToGenerator);\n  var _expoFileSystem = require(_dependencyMap[1]);\n  var FileSystem = _interopNamespace(_expoFileSystem);\n  var _expoSharing = require(_dependencyMap[2]);\n  var Sharing = _interopNamespace(_expoSharing);\n  var _expoDocumentPicker = require(_dependencyMap[3]);\n  var DocumentPicker = _interopNamespace(_expoDocumentPicker);\n  var _localStorage = require(_dependencyMap[4]);\n  /**\n   * Creates a backup of all data and opens the native share sheet\n   * User can save to Google Drive, email, or any other app\n   */\n  var createBackup = /*#__PURE__*/function () {\n    var _ref = (0, _asyncToGenerator.default)(function* () {\n      try {\n        // Get all data from local storage\n        var data = yield (0, _localStorage.getAllData)();\n\n        // Create backup object\n        var backup = {\n          version: '1.0',\n          exportedAt: new Date().toISOString(),\n          appName: 'Arrow Tracker',\n          data: {\n            sessions: data.sessions,\n            bows: data.bows\n          }\n        };\n\n        // Create file name with date\n        var dateStr = new Date().toISOString().split('T')[0];\n        var fileName = `arrow-tracker-backup-${dateStr}.json`;\n        var filePath = `${FileSystem.cacheDirectory}${fileName}`;\n\n        // Write to file\n        yield FileSystem.writeAsStringAsync(filePath, JSON.stringify(backup, null, 2));\n\n        // Check if sharing is available\n        var sharingAvailable = yield Sharing.isAvailableAsync();\n        if (!sharingAvailable) {\n          return {\n            success: false,\n            error: 'Sharing is not available on this device'\n          };\n        }\n\n        // Open native share sheet\n        yield Sharing.shareAsync(filePath, {\n          mimeType: 'application/json',\n          dialogTitle: 'Save Arrow Tracker Backup',\n          UTI: 'public.json'\n        });\n\n        // Update last backup date\n        yield (0, _localStorage.setLastBackupDate)();\n        return {\n          success: true\n        };\n      } catch (error) {\n        console.error('Backup error:', error);\n        return {\n          success: false,\n          error: error instanceof Error ? error.message : 'Unknown error'\n        };\n      }\n    });\n    return function createBackup() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  /**\n   * Opens file picker to select a backup file and restores the data\n   */\n  var restoreBackup = /*#__PURE__*/function () {\n    var _ref2 = (0, _asyncToGenerator.default)(function* () {\n      try {\n        // Open file picker\n        var result = yield DocumentPicker.getDocumentAsync({\n          type: 'application/json',\n          copyToCacheDirectory: true\n        });\n\n        // Check if user cancelled\n        if (result.canceled) {\n          return {\n            success: false,\n            canceled: true\n          };\n        }\n        var file = result.assets[0];\n\n        // Read file content\n        var content = yield FileSystem.readAsStringAsync(file.uri);\n        var backup = JSON.parse(content);\n\n        // Validate backup format\n        if (!backup.data || !backup.data.sessions && !backup.data.bows) {\n          return {\n            success: false,\n            error: 'Invalid backup file format'\n          };\n        }\n\n        // Restore data\n        var restored = yield (0, _localStorage.restoreAllData)({\n          sessions: backup.data.sessions || [],\n          bows: backup.data.bows || []\n        });\n        if (!restored) {\n          return {\n            success: false,\n            error: 'Failed to restore data'\n          };\n        }\n        return {\n          success: true,\n          sessionsCount: backup.data.sessions?.length || 0,\n          bowsCount: backup.data.bows?.length || 0\n        };\n      } catch (error) {\n        console.error('Restore error:', error);\n        return {\n          success: false,\n          error: error instanceof Error ? error.message : 'Unknown error'\n        };\n      }\n    });\n    return function restoreBackup() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n});","lineCount":172,"map":[[27,2,10,0,"Object"],[27,8,10,0],[27,9,10,0,"defineProperty"],[27,23,10,0],[27,24,10,0,"exports"],[27,31,10,0],[28,4,10,0,"enumerable"],[28,14,10,0],[29,4,10,0,"get"],[29,7,10,0],[29,18,10,0,"get"],[29,19,10,0],[30,6,10,0],[30,13,10,0,"createBackup"],[30,25,10,0],[31,4,10,0],[32,2,10,0],[33,2,60,0,"Object"],[33,8,60,0],[33,9,60,0,"defineProperty"],[33,23,60,0],[33,24,60,0,"exports"],[33,31,60,0],[34,4,60,0,"enumerable"],[34,14,60,0],[35,4,60,0,"get"],[35,7,60,0],[35,18,60,0,"get"],[35,19,60,0],[36,6,60,0],[36,13,60,0,"restoreBackup"],[36,26,60,0],[37,4,60,0],[38,2,60,0],[39,2,109,2],[39,6,109,2,"_babelRuntimeHelpersAsyncToGenerator"],[39,42,109,2],[39,45,109,2,"require"],[39,52,109,2],[39,53,109,2,"_dependencyMap"],[39,67,109,2],[40,2,109,2],[40,6,109,2,"_asyncToGenerator"],[40,23,109,2],[40,26,109,2,"_interopDefault"],[40,41,109,2],[40,42,109,2,"_babelRuntimeHelpersAsyncToGenerator"],[40,78,109,2],[41,2,1,0],[41,6,1,0,"_expoFileSystem"],[41,21,1,0],[41,24,1,0,"require"],[41,31,1,0],[41,32,1,0,"_dependencyMap"],[41,46,1,0],[42,2,1,0],[42,6,1,0,"FileSystem"],[42,16,1,0],[42,19,1,0,"_interopNamespace"],[42,36,1,0],[42,37,1,0,"_expoFileSystem"],[42,52,1,0],[43,2,2,0],[43,6,2,0,"_expoSharing"],[43,18,2,0],[43,21,2,0,"require"],[43,28,2,0],[43,29,2,0,"_dependencyMap"],[43,43,2,0],[44,2,2,0],[44,6,2,0,"Sharing"],[44,13,2,0],[44,16,2,0,"_interopNamespace"],[44,33,2,0],[44,34,2,0,"_expoSharing"],[44,46,2,0],[45,2,3,0],[45,6,3,0,"_expoDocumentPicker"],[45,25,3,0],[45,28,3,0,"require"],[45,35,3,0],[45,36,3,0,"_dependencyMap"],[45,50,3,0],[46,2,3,0],[46,6,3,0,"DocumentPicker"],[46,20,3,0],[46,23,3,0,"_interopNamespace"],[46,40,3,0],[46,41,3,0,"_expoDocumentPicker"],[46,60,3,0],[47,2,4,0],[47,6,4,0,"_localStorage"],[47,19,4,0],[47,22,4,0,"require"],[47,29,4,0],[47,30,4,0,"_dependencyMap"],[47,44,4,0],[48,2,6,0],[49,0,7,0],[50,0,8,0],[51,0,9,0],[52,2,10,7],[52,6,10,13,"createBackup"],[52,18,10,25],[53,4,10,25],[53,8,10,25,"_ref"],[53,12,10,25],[53,19,10,25,"_asyncToGenerator"],[53,36,10,25],[53,37,10,25,"default"],[53,44,10,25],[53,46,10,28],[53,59,10,87],[54,6,11,2],[54,10,11,6],[55,8,12,4],[56,8,13,4],[56,12,13,10,"data"],[56,16,13,14],[56,25,13,23],[56,29,13,23,"getAllData"],[56,42,13,33],[56,43,13,33,"getAllData"],[56,53,13,33],[56,55,13,34],[56,56,13,35],[58,8,15,4],[59,8,16,4],[59,12,16,10,"backup"],[59,18,16,16],[59,21,16,19],[60,10,17,6,"version"],[60,17,17,13],[60,19,17,15],[60,24,17,20],[61,10,18,6,"exportedAt"],[61,20,18,16],[61,22,18,18],[61,26,18,22,"Date"],[61,30,18,26],[61,31,18,27],[61,32,18,28],[61,33,18,29,"toISOString"],[61,44,18,40],[61,45,18,41],[61,46,18,42],[62,10,19,6,"appName"],[62,17,19,13],[62,19,19,15],[62,34,19,30],[63,10,20,6,"data"],[63,14,20,10],[63,16,20,12],[64,12,21,8,"sessions"],[64,20,21,16],[64,22,21,18,"data"],[64,26,21,22],[64,27,21,23,"sessions"],[64,35,21,31],[65,12,22,8,"bows"],[65,16,22,12],[65,18,22,14,"data"],[65,22,22,18],[65,23,22,19,"bows"],[66,10,23,6],[67,8,24,4],[67,9,24,5],[69,8,26,4],[70,8,27,4],[70,12,27,10,"dateStr"],[70,19,27,17],[70,22,27,20],[70,26,27,24,"Date"],[70,30,27,28],[70,31,27,29],[70,32,27,30],[70,33,27,31,"toISOString"],[70,44,27,42],[70,45,27,43],[70,46,27,44],[70,47,27,45,"split"],[70,52,27,50],[70,53,27,51],[70,56,27,54],[70,57,27,55],[70,58,27,56],[70,59,27,57],[70,60,27,58],[71,8,28,4],[71,12,28,10,"fileName"],[71,20,28,18],[71,23,28,21],[71,47,28,45,"dateStr"],[71,54,28,52],[71,61,28,59],[72,8,29,4],[72,12,29,10,"filePath"],[72,20,29,18],[72,23,29,21],[72,26,29,24,"FileSystem"],[72,36,29,34],[72,37,29,35,"cacheDirectory"],[72,51,29,49],[72,54,29,52,"fileName"],[72,62,29,60],[72,64,29,62],[74,8,31,4],[75,8,32,4],[75,14,32,10,"FileSystem"],[75,24,32,20],[75,25,32,21,"writeAsStringAsync"],[75,43,32,39],[75,44,32,40,"filePath"],[75,52,32,48],[75,54,32,50,"JSON"],[75,58,32,54],[75,59,32,55,"stringify"],[75,68,32,64],[75,69,32,65,"backup"],[75,75,32,71],[75,77,32,73],[75,81,32,77],[75,83,32,79],[75,84,32,80],[75,85,32,81],[75,86,32,82],[77,8,34,4],[78,8,35,4],[78,12,35,10,"sharingAvailable"],[78,28,35,26],[78,37,35,35,"Sharing"],[78,44,35,42],[78,45,35,43,"isAvailableAsync"],[78,61,35,59],[78,62,35,60],[78,63,35,61],[79,8,36,4],[79,12,36,8],[79,13,36,9,"sharingAvailable"],[79,29,36,25],[79,31,36,27],[80,10,37,6],[80,17,37,13],[81,12,37,15,"success"],[81,19,37,22],[81,21,37,24],[81,26,37,29],[82,12,37,31,"error"],[82,17,37,36],[82,19,37,38],[83,10,37,80],[83,11,37,81],[84,8,38,4],[86,8,40,4],[87,8,41,4],[87,14,41,10,"Sharing"],[87,21,41,17],[87,22,41,18,"shareAsync"],[87,32,41,28],[87,33,41,29,"filePath"],[87,41,41,37],[87,43,41,39],[88,10,42,6,"mimeType"],[88,18,42,14],[88,20,42,16],[88,38,42,34],[89,10,43,6,"dialogTitle"],[89,21,43,17],[89,23,43,19],[89,50,43,46],[90,10,44,6,"UTI"],[90,13,44,9],[90,15,44,11],[91,8,45,4],[91,9,45,5],[91,10,45,6],[93,8,47,4],[94,8,48,4],[94,14,48,10],[94,18,48,10,"setLastBackupDate"],[94,31,48,27],[94,32,48,27,"setLastBackupDate"],[94,49,48,27],[94,51,48,28],[94,52,48,29],[95,8,50,4],[95,15,50,11],[96,10,50,13,"success"],[96,17,50,20],[96,19,50,22],[97,8,50,27],[97,9,50,28],[98,6,51,2],[98,7,51,3],[98,8,51,4],[98,15,51,11,"error"],[98,20,51,16],[98,22,51,18],[99,8,52,4,"console"],[99,15,52,11],[99,16,52,12,"error"],[99,21,52,17],[99,22,52,18],[99,37,52,33],[99,39,52,35,"error"],[99,44,52,40],[99,45,52,41],[100,8,53,4],[100,15,53,11],[101,10,53,13,"success"],[101,17,53,20],[101,19,53,22],[101,24,53,27],[102,10,53,29,"error"],[102,15,53,34],[102,17,53,36,"error"],[102,22,53,41],[102,34,53,53,"Error"],[102,39,53,58],[102,42,53,61,"error"],[102,47,53,66],[102,48,53,67,"message"],[102,55,53,74],[102,58,53,77],[103,8,53,93],[103,9,53,94],[104,6,54,2],[105,4,55,0],[105,5,55,1],[106,4,55,1],[106,20,10,13,"createBackup"],[106,32,10,25,"createBackup"],[106,33,10,25],[107,6,10,25],[107,13,10,25,"_ref"],[107,17,10,25],[107,18,10,25,"apply"],[107,23,10,25],[107,30,10,25,"arguments"],[107,39,10,25],[108,4,10,25],[109,2,10,25],[109,5,55,1],[111,2,57,0],[112,0,58,0],[113,0,59,0],[114,2,60,7],[114,6,60,13,"restoreBackup"],[114,19,60,26],[115,4,60,26],[115,8,60,26,"_ref2"],[115,13,60,26],[115,20,60,26,"_asyncToGenerator"],[115,37,60,26],[115,38,60,26,"default"],[115,45,60,26],[115,47,60,29],[115,60,66,6],[116,6,67,2],[116,10,67,6],[117,8,68,4],[118,8,69,4],[118,12,69,10,"result"],[118,18,69,16],[118,27,69,25,"DocumentPicker"],[118,41,69,39],[118,42,69,40,"getDocumentAsync"],[118,58,69,56],[118,59,69,57],[119,10,70,6,"type"],[119,14,70,10],[119,16,70,12],[119,34,70,30],[120,10,71,6,"copyToCacheDirectory"],[120,30,71,26],[120,32,71,28],[121,8,72,4],[121,9,72,5],[121,10,72,6],[123,8,74,4],[124,8,75,4],[124,12,75,8,"result"],[124,18,75,14],[124,19,75,15,"canceled"],[124,27,75,23],[124,29,75,25],[125,10,76,6],[125,17,76,13],[126,12,76,15,"success"],[126,19,76,22],[126,21,76,24],[126,26,76,29],[127,12,76,31,"canceled"],[127,20,76,39],[127,22,76,41],[128,10,76,46],[128,11,76,47],[129,8,77,4],[130,8,79,4],[130,12,79,10,"file"],[130,16,79,14],[130,19,79,17,"result"],[130,25,79,23],[130,26,79,24,"assets"],[130,32,79,30],[130,33,79,31],[130,34,79,32],[130,35,79,33],[132,8,81,4],[133,8,82,4],[133,12,82,10,"content"],[133,19,82,17],[133,28,82,26,"FileSystem"],[133,38,82,36],[133,39,82,37,"readAsStringAsync"],[133,56,82,54],[133,57,82,55,"file"],[133,61,82,59],[133,62,82,60,"uri"],[133,65,82,63],[133,66,82,64],[134,8,83,4],[134,12,83,10,"backup"],[134,18,83,16],[134,21,83,19,"JSON"],[134,25,83,23],[134,26,83,24,"parse"],[134,31,83,29],[134,32,83,30,"content"],[134,39,83,37],[134,40,83,38],[136,8,85,4],[137,8,86,4],[137,12,86,8],[137,13,86,9,"backup"],[137,19,86,15],[137,20,86,16,"data"],[137,24,86,20],[137,28,86,25],[137,29,86,26,"backup"],[137,35,86,32],[137,36,86,33,"data"],[137,40,86,37],[137,41,86,38,"sessions"],[137,49,86,46],[137,53,86,50],[137,54,86,51,"backup"],[137,60,86,57],[137,61,86,58,"data"],[137,65,86,62],[137,66,86,63,"bows"],[137,70,86,68],[137,72,86,70],[138,10,87,6],[138,17,87,13],[139,12,87,15,"success"],[139,19,87,22],[139,21,87,24],[139,26,87,29],[140,12,87,31,"error"],[140,17,87,36],[140,19,87,38],[141,10,87,67],[141,11,87,68],[142,8,88,4],[144,8,90,4],[145,8,91,4],[145,12,91,10,"restored"],[145,20,91,18],[145,29,91,27],[145,33,91,27,"restoreAllData"],[145,46,91,41],[145,47,91,41,"restoreAllData"],[145,61,91,41],[145,63,91,42],[146,10,92,6,"sessions"],[146,18,92,14],[146,20,92,16,"backup"],[146,26,92,22],[146,27,92,23,"data"],[146,31,92,27],[146,32,92,28,"sessions"],[146,40,92,36],[146,44,92,40],[146,46,92,42],[147,10,93,6,"bows"],[147,14,93,10],[147,16,93,12,"backup"],[147,22,93,18],[147,23,93,19,"data"],[147,27,93,23],[147,28,93,24,"bows"],[147,32,93,28],[147,36,93,32],[148,8,94,4],[148,9,94,5],[148,10,94,6],[149,8,96,4],[149,12,96,8],[149,13,96,9,"restored"],[149,21,96,17],[149,23,96,19],[150,10,97,6],[150,17,97,13],[151,12,97,15,"success"],[151,19,97,22],[151,21,97,24],[151,26,97,29],[152,12,97,31,"error"],[152,17,97,36],[152,19,97,38],[153,10,97,63],[153,11,97,64],[154,8,98,4],[155,8,100,4],[155,15,100,11],[156,10,101,6,"success"],[156,17,101,13],[156,19,101,15],[156,23,101,19],[157,10,102,6,"sessionsCount"],[157,23,102,19],[157,25,102,21,"backup"],[157,31,102,27],[157,32,102,28,"data"],[157,36,102,32],[157,37,102,33,"sessions"],[157,45,102,41],[157,47,102,43,"length"],[157,53,102,49],[157,57,102,53],[157,58,102,54],[158,10,103,6,"bowsCount"],[158,19,103,15],[158,21,103,17,"backup"],[158,27,103,23],[158,28,103,24,"data"],[158,32,103,28],[158,33,103,29,"bows"],[158,37,103,33],[158,39,103,35,"length"],[158,45,103,41],[158,49,103,45],[159,8,104,4],[159,9,104,5],[160,6,105,2],[160,7,105,3],[160,8,105,4],[160,15,105,11,"error"],[160,20,105,16],[160,22,105,18],[161,8,106,4,"console"],[161,15,106,11],[161,16,106,12,"error"],[161,21,106,17],[161,22,106,18],[161,38,106,34],[161,40,106,36,"error"],[161,45,106,41],[161,46,106,42],[162,8,107,4],[162,15,107,11],[163,10,107,13,"success"],[163,17,107,20],[163,19,107,22],[163,24,107,27],[164,10,107,29,"error"],[164,15,107,34],[164,17,107,36,"error"],[164,22,107,41],[164,34,107,53,"Error"],[164,39,107,58],[164,42,107,61,"error"],[164,47,107,66],[164,48,107,67,"message"],[164,55,107,74],[164,58,107,77],[165,8,107,93],[165,9,107,94],[166,6,108,2],[167,4,109,0],[167,5,109,1],[168,4,109,1],[168,20,60,13,"restoreBackup"],[168,33,60,26,"restoreBackup"],[168,34,60,26],[169,6,60,26],[169,13,60,26,"_ref2"],[169,18,60,26],[169,19,60,26,"apply"],[169,24,60,26],[169,31,60,26,"arguments"],[169,40,60,26],[170,4,60,26],[171,2,60,26],[171,5,109,1],[172,0,109,2],[172,3]],"functionMap":{"names":["<global>","createBackup","restoreBackup"],"mappings":"AAA;4BCS;CD6C;6BEK;CFiD"},"hasCjsExports":false},"type":"js/module"}]}