{"dependencies":[{"name":"expo-file-system","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":47,"index":47}}],"key":"6GyvFG3BsQPSqqu9QRKJ8hfZxPw=","exportNames":["*"],"imports":1}},{"name":"expo-sharing","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":48},"end":{"line":2,"column":40,"index":88}}],"key":"SUh687CeWkW0B+T6RbmrU/yQMvg=","exportNames":["*"],"imports":1}},{"name":"expo-document-picker","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":89},"end":{"line":3,"column":55,"index":144}}],"key":"NWjULt4J8GGUdXN68lY2F08+J7M=","exportNames":["*"],"imports":1}},{"name":"./localStorage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":145},"end":{"line":4,"column":79,"index":224}}],"key":"0SgXd320WtDFl1YmvtLMkksOAwg=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function(g,r,i,a,m,_e,_d){\"use strict\";function e(e){if(e&&e.__esModule)return e;var s={};return e&&Object.keys(e).forEach(function(t){var n=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(s,t,n.get?n:{enumerable:!0,get:function(){return e[t]}})}),s.default=e,s}Object.defineProperty(_e,'__esModule',{value:!0}),Object.defineProperty(_e,\"createBackup\",{enumerable:!0,get:function(){return c}}),Object.defineProperty(_e,\"restoreBackup\",{enumerable:!0,get:function(){return u}});var s=e(r(_d[0])),t=e(r(_d[1])),n=e(r(_d[2])),o=r(_d[3]);const c=async()=>{try{const e=await(0,o.getAllData)(),n={version:'1.0',exportedAt:(new Date).toISOString(),appName:'Arrow Tracker',data:{sessions:e.sessions,bows:e.bows}},c=`arrow-tracker-backup-${(new Date).toISOString().split('T')[0]}.json`,u=`${s.cacheDirectory}${c}`;await s.writeAsStringAsync(u,JSON.stringify(n,null,2));return await t.isAvailableAsync()?(await t.shareAsync(u,{mimeType:'application/json',dialogTitle:'Save Arrow Tracker Backup',UTI:'public.json'}),await(0,o.setLastBackupDate)(),{success:!0}):{success:!1,error:'Sharing is not available on this device'}}catch(e){return console.error('Backup error:',e),{success:!1,error:e instanceof Error?e.message:'Unknown error'}}},u=async()=>{try{const e=await n.getDocumentAsync({type:'application/json',copyToCacheDirectory:!0});if(e.canceled)return{success:!1,canceled:!0};const t=e.assets[0],c=await s.readAsStringAsync(t.uri),u=JSON.parse(c);if(!u.data||!u.data.sessions&&!u.data.bows)return{success:!1,error:'Invalid backup file format'};return await(0,o.restoreAllData)({sessions:u.data.sessions||[],bows:u.data.bows||[]})?{success:!0,sessionsCount:u.data.sessions?.length||0,bowsCount:u.data.bows?.length||0}:{success:!1,error:'Failed to restore data'}}catch(e){return console.error('Restore error:',e),{success:!1,error:e instanceof Error?e.message:'Unknown error'}}}});","lineCount":1,"map":[[1,327,10,0,"Object"],[1,334,10,0,"defineProperty"],[1,349,10,0,"_e"],[1,352,10,0],[1,368,10,0,"enumerable"],[1,380,10,0],[1,382,10,0,"get"],[1,386,10,0],[1,404,10,0,"createBackup"],[1,405,10,0],[1,409,60,0,"Object"],[1,416,60,0,"defineProperty"],[1,431,60,0,"_e"],[1,434,60,0],[1,451,60,0,"enumerable"],[1,463,60,0],[1,465,60,0,"get"],[1,469,60,0],[1,487,60,0,"restoreBackup"],[1,488,60,0],[1,492,1,0],[1,496,1,0,"FileSystem"],[1,498,1,0,"_interopNamespace"],[1,500,1,0,"r"],[1,502,1,0,"_d"],[1,505,1,0],[1,510,2,0,"Sharing"],[1,512,2,0,"_interopNamespace"],[1,514,2,0,"r"],[1,516,2,0,"_d"],[1,519,2,0],[1,524,3,0,"DocumentPicker"],[1,526,3,0,"_interopNamespace"],[1,528,3,0,"r"],[1,530,3,0,"_d"],[1,533,3,0],[1,538,4,0,"_localStorage"],[1,540,4,0,"r"],[1,542,4,0,"_d"],[1,545,4,0],[1,549,10,7],[1,555,10,13,"createBackup"],[1,557,10,28,"async"],[1,567,11,2],[1,571,13,4],[1,577,13,10,"data"],[1,585,13,23],[1,587,13,23,"getAllData"],[1,589,13,33,"getAllData"],[1,603,16,10,"backup"],[1,605,16,19],[1,606,17,6,"version"],[1,614,17,15],[1,620,18,6,"exportedAt"],[1,632,18,18],[1,636,18,22,"Date"],[1,642,18,29,"toISOString"],[1,656,19,6,"appName"],[1,664,19,15],[1,680,20,6,"data"],[1,685,20,12],[1,686,21,8,"sessions"],[1,695,21,18,"data"],[1,697,21,23,"sessions"],[1,706,22,8,"bows"],[1,711,22,14,"data"],[1,713,22,19,"bows"],[1,720,28,10,"fileName"],[1,722,28,21],[1,747,27,20],[1,751,27,24,"Date"],[1,757,27,31,"toISOString"],[1,771,27,45,"split"],[1,777,27,51],[1,782,27,56],[1,792,29,10,"filePath"],[1,794,29,21],[1,797,29,24,"FileSystem"],[1,799,29,35,"cacheDirectory"],[1,816,29,52,"fileName"],[1,826,32,10,"FileSystem"],[1,828,32,21,"writeAsStringAsync"],[1,847,32,40,"filePath"],[1,849,32,50,"JSON"],[1,854,32,55,"stringify"],[1,864,32,65,"backup"],[1,866,32,73],[1,871,32,79],[1,875,36,4],[1,888,35,35,"Sharing"],[1,890,35,43,"isAvailableAsync"],[1,916,41,10,"Sharing"],[1,918,41,18,"shareAsync"],[1,929,41,29,"filePath"],[1,931,41,39],[1,932,42,6,"mimeType"],[1,941,42,16],[1,960,43,6,"dialogTitle"],[1,972,43,19],[1,1000,44,6,"UTI"],[1,1004,44,11],[1,1026,48,10],[1,1028,48,10,"setLastBackupDate"],[1,1030,48,27,"setLastBackupDate"],[1,1051,50,11],[1,1052,50,13,"success"],[1,1061,50,22],[1,1065,37,13],[1,1066,37,15,"success"],[1,1075,37,24],[1,1077,37,31,"error"],[1,1083,37,38],[1,1125,51,2],[1,1126,51,4],[1,1132,51,11,"error"],[1,1135,53,4],[1,1142,52,4,"console"],[1,1150,52,12,"error"],[1,1156,52,18],[1,1172,52,35,"error"],[1,1175,53,11],[1,1176,53,13,"success"],[1,1185,53,22],[1,1187,53,29,"error"],[1,1193,53,36,"error"],[1,1206,53,53,"Error"],[1,1212,53,61,"error"],[1,1214,53,67,"message"],[1,1222,53,77],[1,1238,54,2],[1,1241,60,13,"restoreBackup"],[1,1243,60,29,"async"],[1,1253,67,2],[1,1257,69,4],[1,1263,69,10,"result"],[1,1271,69,25,"DocumentPicker"],[1,1273,69,40,"getDocumentAsync"],[1,1290,69,57],[1,1291,70,6,"type"],[1,1296,70,12],[1,1315,71,6,"copyToCacheDirectory"],[1,1337,71,28],[1,1341,75,4],[1,1344,75,8,"result"],[1,1346,75,15,"canceled"],[1,1355,76,6],[1,1361,76,13],[1,1362,76,15,"success"],[1,1371,76,24],[1,1373,76,31,"canceled"],[1,1383,76,41],[1,1386,79,4],[1,1392,79,10,"file"],[1,1394,79,17,"result"],[1,1396,79,24,"assets"],[1,1403,79,31],[1,1406,82,10,"content"],[1,1414,82,26,"FileSystem"],[1,1416,82,37,"readAsStringAsync"],[1,1434,82,55,"file"],[1,1436,82,60,"uri"],[1,1441,83,10,"backup"],[1,1443,83,19,"JSON"],[1,1448,83,24,"parse"],[1,1454,83,30,"content"],[1,1457,86,4],[1,1461,86,9,"backup"],[1,1463,86,16,"data"],[1,1470,86,26,"backup"],[1,1472,86,33,"data"],[1,1477,86,38,"sessions"],[1,1488,86,51,"backup"],[1,1490,86,58,"data"],[1,1495,86,63,"bows"],[1,1500,87,6],[1,1506,87,13],[1,1507,87,15,"success"],[1,1516,87,24],[1,1518,87,31,"error"],[1,1524,87,38],[1,1554,96,4],[1,1567,91,27],[1,1569,91,27,"restoreAllData"],[1,1571,91,41,"restoreAllData"],[1,1587,91,42],[1,1588,92,6,"sessions"],[1,1597,92,16,"backup"],[1,1599,92,23,"data"],[1,1604,92,28,"sessions"],[1,1614,92,40],[1,1617,93,6,"bows"],[1,1622,93,12,"backup"],[1,1624,93,19,"data"],[1,1629,93,24,"bows"],[1,1635,93,32],[1,1640,100,11],[1,1641,101,6,"success"],[1,1650,101,15],[1,1652,102,6,"sessionsCount"],[1,1666,102,21,"backup"],[1,1668,102,28,"data"],[1,1673,102,33,"sessions"],[1,1683,102,43,"length"],[1,1691,102,53],[1,1693,103,6,"bowsCount"],[1,1703,103,17,"backup"],[1,1705,103,24,"data"],[1,1710,103,29,"bows"],[1,1716,103,35,"length"],[1,1724,103,45],[1,1727,97,13],[1,1728,97,15,"success"],[1,1737,97,24],[1,1739,97,31,"error"],[1,1745,97,38],[1,1770,105,2],[1,1771,105,4],[1,1777,105,11,"error"],[1,1780,107,4],[1,1787,106,4,"console"],[1,1795,106,12,"error"],[1,1801,106,18],[1,1818,106,36,"error"],[1,1821,107,11],[1,1822,107,13,"success"],[1,1831,107,22],[1,1833,107,29,"error"],[1,1839,107,36,"error"],[1,1852,107,53,"Error"],[1,1858,107,61,"error"],[1,1860,107,67,"message"],[1,1868,107,77],[1,1884,108,2],[1,1886,109,2],[1,1889]],"functionMap":{"names":["<global>","createBackup","restoreBackup"],"mappings":"AAA;4BCS;CD6C;6BEK;CFiD"},"hasCjsExports":false},"type":"js/module"}]}